
# 私用合约交易网站 - 产品需求文档（PRD）

## 一、项目背景

本项目为个人策略交易系统，仅本人使用。通过极简交互界面，用户只需判断行情方向（看涨 / 看跌），系统将自动按预设策略计算仓位、设置止损止盈、执行加仓与分批止盈等合约操作，提升执行力与纪律性。

当前仅对接 Binance 交易所（Binance Futures），初期不考虑多平台、多账户支持。
仅支持 BTC 和 ETH 两个币种，支持现货与合约交易。
仅支持移动端访问，界面将专为手机浏览器优化。

---

## 二、用户与权限

* 用户数：仅限本人使用
* 登录机制：通过 API Key 绑定 + 前端访问白名单控制
* 权限控制：仅支持本人发起交易指令，不开放外部访问

---

## 三、核心功能模块

### 1. 看涨 / 看跌下单入口

* 功能：用户点击“我看涨”或“我看跌”按钮，系统读取当前市价并执行策略下单
* 附加功能：确认弹窗 + 显示即将执行的下单参数（价格、仓位、止损、止盈）
* 币种选择：支持 BTC / ETH（默认 BTC）
* 交易类型：支持“合约 / 现货”切换

### 2. 策略计算模块

按以下策略模型自动生成下单参数：

* 初始建仓金额 = （总余额 × 2%）/（止损幅度 × 杠杆）
* 默认止损 = 2%
* 默认杠杆 = 10×（可配置）
* 浮盈加仓：每盈利 10%，用当前浮盈的 10% 再次加仓一次（最多加仓 3 次）
* 分批止盈：盈利 20% 平 1/3，50% 再平 1/3，尾仓设追踪止盈（回撤 5%）

### 3. Binance API 接入模块

* 功能：获取账户余额、下单、设置止损止盈、监控浮盈状态
* 接口对接项：

  * 获取余额
  * 市价开仓（多 / 空）
  * 设置止损（stop loss）、止盈（take profit）
  * 获取当前持仓浮盈百分比
  * 平仓 / 加仓

### 4. 实时监控与策略追踪模块

* 功能：

  * 定时检查浮盈是否达到加仓 / 止盈条件
  * 若满足，加仓或平仓
  * 若止损条件触发，立即止损离场

---

## 四、界面设计草图（简述）

### 首页：策略看板（移动端布局）

* 当前账户余额（USDT）
* 当前是否持仓（方向 / 仓位 / 盈亏）
* 币种选择（BTC / ETH）+ 交易类型（合约 / 现货）
* 操作入口：

  * ✅ 看涨（绿色按钮）
  * ✅ 看跌（红色按钮）

### 操作记录页：

* 每一次交易执行记录（时间 / 方向 / 建仓价 / 止损价 / 加仓记录 / 平仓记录）

---

## 五、后续规划（暂不实现）

* 多交易所对接
* 多币种支持（当前只做 BTC/USDT 和 ETH/USDT）
* 用户管理系统（当前仅限本人）

---

## 六、安全机制

* API Key 加密存储（本地或密钥服务）
* 接口调用限制，防止误触或重复操作
* 所有交易操作须弹窗确认

---

## 七、技术选型建议

| 模块     | 技术方案                                 |
| ------ | ------------------------------------ |
| 前端     | Vue / Nuxt.js + Tailwind（移动端优化）      |
| 后端     | FastAPI / Flask                      |
| 定时任务   | Celery / APScheduler                 |
| 数据存储   | SQLite / Supabase                    |
| 交易 API | Binance Futures REST API + WebSocket |
